---
import { availableTopics } from "../../../../types/src";
import Layout from "../../layouts/Layout.astro";
import { basename } from "node:path";

export function getStaticPaths() {
  return availableTopics.map((topic) => {
    return { params: { topic: topic } };
  });
}

const { topic } = Astro.params;

const data = await Astro.glob("../../../../../specifications/**/*.md");
if (!topic) {
  return Astro.redirect("/404", 404);
}

const filename = `${topic}/${basename(topic)}.md`;
const page = data.find((i) => i.file.includes(filename));

if (!page) {
  return Astro.redirect("/404", 404);
}
---

<Layout title="HWB Standard">
  <main class="prose m-auto">
    <page.Content />
  </main>
</Layout>
